# ğŸ§µ Superthread ì €ì¥ì†Œ ì™„ë²½ ì„¤ì • ê°€ì´ë“œ

Superthreadë¥¼ Memory Hubì˜ ì €ì¥ì†Œë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì™„ì „í•œ ì„¤ì • ë° ì‚¬ìš© ê°€ì´ë“œì…ë‹ˆë‹¤.

---

## ğŸ“‹ ëª©ì°¨

1. [ê³„ì • ìƒì„± ë° ì„¤ì •](#ê³„ì •-ìƒì„±-ë°-ì„¤ì •)
2. [API í‚¤ ë°œê¸‰](#api-í‚¤-ë°œê¸‰)
3. [í™˜ê²½ ë³€ìˆ˜ ì„¤ì •](#í™˜ê²½-ë³€ìˆ˜-ì„¤ì •)
4. [ì €ì¥ì†Œ ê¸°ëŠ¥](#ì €ì¥ì†Œ-ê¸°ëŠ¥)
5. [API ì—”ë“œí¬ì¸íŠ¸](#api-ì—”ë“œí¬ì¸íŠ¸)
6. [ì‚¬ìš© ì˜ˆì œ](#ì‚¬ìš©-ì˜ˆì œ)
7. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

---

## ê³„ì • ìƒì„± ë° ì„¤ì •

### 1ë‹¨ê³„: Superthread ê°€ì…

1. [Superthread](https://superthread.com/)ì— ì ‘ì†í•©ë‹ˆë‹¤
2. ì´ë©”ì¼ë¡œ ìƒˆ ê³„ì •ì„ ë§Œë“­ë‹ˆë‹¤
3. ì´ë©”ì¼ ì¸ì¦ì„ ì™„ë£Œí•©ë‹ˆë‹¤

### 2ë‹¨ê³„: ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ìƒì„±

1. ëŒ€ì‹œë³´ë“œì— ë¡œê·¸ì¸í•©ë‹ˆë‹¤
2. "ìƒˆ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë§Œë“¤ê¸°" ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤
3. ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì´ë¦„ì„ ì…ë ¥í•©ë‹ˆë‹¤ (ì˜ˆ: "Memory Hub")
4. ì›Œí¬ìŠ¤í˜ì´ìŠ¤ê°€ ìƒì„±ë©ë‹ˆë‹¤

### 3ë‹¨ê³„: íŒ€ ë©¤ë²„ ì´ˆëŒ€ (ì„ íƒì‚¬í•­)

1. ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì„¤ì •ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤
2. "ë©¤ë²„" íƒ­ì„ ì„ íƒí•©ë‹ˆë‹¤
3. íŒ€ì›ì˜ ì´ë©”ì¼ì„ ì…ë ¥í•˜ì—¬ ì´ˆëŒ€í•©ë‹ˆë‹¤
4. ê¶Œí•œ ë ˆë²¨ì„ ì„¤ì •í•©ë‹ˆë‹¤:
   - **Admin**: ì™„ì „í•œ ê´€ë¦¬ ê¶Œí•œ
   - **Editor**: ë¬¸ì„œ í¸ì§‘ ê¶Œí•œ
   - **Viewer**: ì½ê¸° ì „ìš© ê¶Œí•œ

---

## API í‚¤ ë°œê¸‰

### API í‚¤ ìƒì„± ë°©ë²•

1. ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì„¤ì • â†’ "API & Integrations" íƒ­
2. "ìƒˆ API í‚¤ ìƒì„±" í´ë¦­
3. í‚¤ ì´ë¦„ì„ ì…ë ¥í•©ë‹ˆë‹¤ (ì˜ˆ: "Memory Hub Integration")
4. ê¶Œí•œ ë²”ìœ„ë¥¼ ì„ íƒí•©ë‹ˆë‹¤:
   - `documents.read` - ë¬¸ì„œ ì½ê¸°
   - `documents.write` - ë¬¸ì„œ ì“°ê¸°
   - `documents.delete` - ë¬¸ì„œ ì‚­ì œ
   - `permissions.manage` - ê¶Œí•œ ê´€ë¦¬
   - `versions.manage` - ë²„ì „ ê´€ë¦¬
5. "ìƒì„±" ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤
6. **API í‚¤ë¥¼ ì•ˆì „í•˜ê²Œ ë³´ê´€í•©ë‹ˆë‹¤** (ë‹¤ì‹œ í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤)

### Workspace ID í™•ì¸

1. ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì„¤ì • â†’ "ì¼ë°˜" íƒ­
2. "Workspace ID" í•„ë“œì—ì„œ IDë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤
3. í˜•ì‹: `workspace_12345...`

---

## í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

### .env íŒŒì¼ êµ¬ì„±

```bash
# Superthread ì €ì¥ì†Œ ì„¤ì •
STORAGE_TYPE=superthread
SUPERTHREAD_API_KEY=sk_test_xxxxxxxxxxxxx
SUPERTHREAD_WORKSPACE_ID=workspace_xxxxxxxxxxxxx
```

### ì„¤ì • íŒŒì¼ (setup_wizard.py)

Streamlit ì„¤ì • ë§ˆë²•ì‚¬ë¥¼ ì‚¬ìš©í•˜ë©´ ìë™ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤:

```bash
cd /path/to/LLM_Deliver
streamlit run setup_wizard.py
```

**ì„¤ì • ë‹¨ê³„:**
1. "AI ëª¨ë¸ ì„ íƒ" - ì‚¬ìš©í•  LLM ì„ íƒ (ì˜ˆ: Claude, ChatGPT)
2. "ì €ì¥ì†Œ ì„ íƒ" - "ğŸ§µ Superthread" ì„ íƒ
3. "API í‚¤ ë° ì„¤ì • ì…ë ¥"
   - API í‚¤ ì…ë ¥ (ê²€ì¦ ë²„íŠ¼ìœ¼ë¡œ í™•ì¸)
   - Workspace ID ì…ë ¥ (ê²€ì¦ ë²„íŠ¼ìœ¼ë¡œ í™•ì¸)
4. "ì„¤ì • ì™„ë£Œ" - ìë™ìœ¼ë¡œ ì•”í˜¸í™”ë˜ì–´ ì €ì¥

---

## ì €ì¥ì†Œ ê¸°ëŠ¥

### âœ¨ ì£¼ìš” ê¸°ëŠ¥

#### 1. **í•µì‹¬ ë©”ëª¨ë¦¬ ê´€ë¦¬**
- ğŸ“ ë©”ëª¨ë¦¬ ì €ì¥ - ë‚´ìš©ì„ Superthreadì— ì €ì¥
- ğŸ” ë©”ëª¨ë¦¬ ì¡°íšŒ - ì €ì¥ëœ ë©”ëª¨ë¦¬ ê²€ìƒ‰
- ğŸ“‹ ëª©ë¡ ì¡°íšŒ - ì „ì²´ ë©”ëª¨ë¦¬ ëª©ë¡ í‘œì‹œ
- ğŸ—‘ï¸ ë©”ëª¨ë¦¬ ì‚­ì œ - ë©”ëª¨ë¦¬ ì™„ì „ ì‚­ì œ

#### 2. **ê¶Œí•œ ê´€ë¦¬** (Team Collaboration)
```python
# ì‚¬ìš©ìë³„ ê¶Œí•œ ì„¤ì •
permissions = {
    "user@example.com": "viewer",      # ì½ê¸°ë§Œ ê°€ëŠ¥
    "team-lead@example.com": "editor", # ìˆ˜ì • ê°€ëŠ¥
    "admin@example.com": "admin"       # ì™„ì „ ê´€ë¦¬
}
storage.set_permissions(doc_id, permissions)
```

#### 3. **ë²„ì „ ê´€ë¦¬** (Version Control)
```python
# ë²„ì „ ëª©ë¡ ì¡°íšŒ
storage.get_versions(doc_id, limit=10)

# ìƒˆ ë²„ì „ ìƒì„±
storage.create_version(doc_id, "ì„¤ëª… ì¶”ê°€")

# ì´ì „ ë²„ì „ìœ¼ë¡œ ë³µì›
storage.revert_to_version(doc_id, version_id)
```

#### 4. **ê³ ê¸‰ ê²€ìƒ‰** (Full-Text Search)
```python
# í‚¤ì›Œë“œë¡œ ë©”ëª¨ë¦¬ ê²€ìƒ‰
storage.search_memories(
    query="python ë°ì´í„° ë¶„ì„",
    scope="personal",
    limit=20
)
```

#### 5. **ë°°ì¹˜ ì‘ì—…** (Batch Operations)
```python
# ì—¬ëŸ¬ ë©”ëª¨ë¦¬ ì¼ê´„ ì €ì¥
memories = [
    {"content": "ë©”ëª¨ë¦¬ 1", "scope": "personal"},
    {"content": "ë©”ëª¨ë¦¬ 2", "scope": "team"},
]
storage.batch_save_memories(memories)

# ì—¬ëŸ¬ ë©”ëª¨ë¦¬ ì¼ê´„ ì‚­ì œ
storage.batch_delete_memories(["doc_id_1", "doc_id_2"])
```

#### 6. **ì›Œí¬ìŠ¤í˜ì´ìŠ¤ í†µê³„** (Monitoring)
```python
# ì›Œí¬ìŠ¤í˜ì´ìŠ¤ í†µê³„ ì¡°íšŒ
stats = storage.get_workspace_stats()
# ë°˜í™˜ê°’: total_documents, storage_used, members, teams ë“±
```

---

## API ì—”ë“œí¬ì¸íŠ¸

### Base URL
```
http://localhost:8000/superthread
```

### ğŸ“ ë©”ëª¨ë¦¬ ê´€ë¦¬

#### ë©”ëª¨ë¦¬ ì €ì¥
```http
POST /superthread/memories
Content-Type: application/json

{
  "content": "ì €ì¥í•  ë©”ëª¨ë¦¬ ë‚´ìš©",
  "scope": "personal",
  "category": "default"
}
```

#### ë©”ëª¨ë¦¬ ëª©ë¡
```http
GET /superthread/memories?scope=personal&limit=10
```

#### ë©”ëª¨ë¦¬ ì‚­ì œ
```http
DELETE /superthread/memories/{doc_id}
```

### ğŸ” ê²€ìƒ‰

```http
POST /superthread/search
Content-Type: application/json

{
  "query": "ê²€ìƒ‰ í‚¤ì›Œë“œ",
  "scope": "personal",
  "limit": 20
}
```

### ğŸ‘¥ ê¶Œí•œ ê´€ë¦¬

#### ê¶Œí•œ ì„¤ì •
```http
POST /superthread/permissions/{doc_id}
Content-Type: application/json

{
  "permissions": {
    "user@example.com": "viewer",
    "team-lead@example.com": "editor"
  }
}
```

#### ê¶Œí•œ ì¡°íšŒ
```http
GET /superthread/permissions/{doc_id}
```

### ğŸ“¦ ë°°ì¹˜ ì‘ì—…

#### ì¼ê´„ ì €ì¥
```http
POST /superthread/batch/save
Content-Type: application/json

{
  "memories": [
    {"content": "ë©”ëª¨ë¦¬ 1", "scope": "personal"},
    {"content": "ë©”ëª¨ë¦¬ 2", "scope": "team"}
  ]
}
```

#### ì¼ê´„ ì‚­ì œ
```http
POST /superthread/batch/delete
Content-Type: application/json

{
  "doc_ids": ["doc_id_1", "doc_id_2", "doc_id_3"]
}
```

### ğŸ“Š ë²„ì „ ê´€ë¦¬

#### ë²„ì „ ì¡°íšŒ
```http
GET /superthread/versions/{doc_id}?limit=10
```

#### ë²„ì „ ìƒì„±
```http
POST /superthread/versions/{doc_id}?description="ìƒˆë¡œìš´ ë²„ì „"
```

#### ë²„ì „ ë³µì›
```http
POST /superthread/versions/{doc_id}/restore/{version_id}
```

### ğŸ“ˆ í†µê³„

#### ì›Œí¬ìŠ¤í˜ì´ìŠ¤ í†µê³„
```http
GET /superthread/stats
```

#### ì €ì¥ì†Œ ì •ë³´
```http
GET /superthread/info
```

#### í—¬ìŠ¤ ì²´í¬
```http
GET /superthread/health
```

---

## ì‚¬ìš© ì˜ˆì œ

### Python ì˜ˆì œ 1: ê¸°ë³¸ ë©”ëª¨ë¦¬ ì €ì¥

```python
from api_server_v2.app.adapters.factory import get_storage

# ì €ì¥ì†Œ ì´ˆê¸°í™”
storage = get_storage()

# ë©”ëª¨ë¦¬ ì €ì¥
result = storage.save_memory(
    workspace_id="workspace_xxxxx",
    content="AI í•™ìŠµ ë…¸íŠ¸: Python ê¸°ì´ˆ",
    scope="personal",
    category="education"
)

print(result["message"])  # "ë©”ëª¨ë¦¬ê°€ Superthreadì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤"
print(result["doc_id"])   # ë¬¸ì„œ ID
```

### Python ì˜ˆì œ 2: íŒ€ í˜‘ì—…

```python
# 1. ë¬¸ì„œ ì €ì¥
doc_result = storage.save_memory(
    workspace_id="workspace_xxxxx",
    content="í”„ë¡œì íŠ¸ ê³„íš",
    scope="team",
    team_key="project-alpha"
)
doc_id = doc_result["doc_id"]

# 2. íŒ€ì›ì—ê²Œ ê¶Œí•œ ë¶€ì—¬
permissions = {
    "alice@company.com": "editor",
    "bob@company.com": "viewer",
    "manager@company.com": "admin"
}
storage.set_permissions(doc_id, permissions)

# 3. ë²„ì „ ìƒì„±
storage.create_version(doc_id, "ì´ˆê¸° ê³„íš ì‘ì„±")

# 4. í˜„ì¬ ê¶Œí•œ í™•ì¸
perms = storage.get_permissions(doc_id)
print(f"í˜„ì¬ ê¶Œí•œ: {perms['permissions']}")
```

### Python ì˜ˆì œ 3: ê²€ìƒ‰ ë° ë°°ì¹˜ ì‘ì—…

```python
# 1. ë©”ëª¨ë¦¬ ê²€ìƒ‰
search_result = storage.search_memories(
    query="Python",
    scope="personal",
    limit=20
)
print(f"ê²€ìƒ‰ ê²°ê³¼: {search_result['count']}ê°œ")

# 2. ë°°ì¹˜ ì €ì¥
memories = [
    {"content": "ë…¸íŠ¸ 1", "scope": "personal", "category": "python"},
    {"content": "ë…¸íŠ¸ 2", "scope": "personal", "category": "python"},
    {"content": "ë…¸íŠ¸ 3", "scope": "team", "team_key": "study"},
]
batch_result = storage.batch_save_memories(memories)
print(f"ì €ì¥ ì™„ë£Œ: {batch_result['saved_count']}/{len(memories)}")

# 3. ì›Œí¬ìŠ¤í˜ì´ìŠ¤ í†µê³„
stats = storage.get_workspace_stats()
print(f"ì „ì²´ ë¬¸ì„œ: {stats['stats']['total_documents']}")
print(f"ì‚¬ìš© ìš©ëŸ‰: {stats['stats']['storage_used']}")
```

### cURL ì˜ˆì œ: API í˜¸ì¶œ

```bash
# 1. ë©”ëª¨ë¦¬ ì €ì¥
curl -X POST "http://localhost:8000/superthread/memories" \
  -H "Content-Type: application/json" \
  -d '{
    "content": "í•™ìŠµ ë‚´ìš©",
    "scope": "personal",
    "category": "study"
  }'

# 2. ë©”ëª¨ë¦¬ ëª©ë¡ ì¡°íšŒ
curl -X GET "http://localhost:8000/superthread/memories?scope=personal&limit=10"

# 3. ê²€ìƒ‰
curl -X POST "http://localhost:8000/superthread/search" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "Python",
    "scope": "personal",
    "limit": 20
  }'

# 4. í†µê³„ ì¡°íšŒ
curl -X GET "http://localhost:8000/superthread/stats"
```

---

## ë¬¸ì œ í•´ê²°

### âŒ "API í‚¤ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤"

**ì›ì¸:**
- API í‚¤ê°€ ì˜ëª» ì…ë ¥ë¨
- API í‚¤ê°€ ë§Œë£Œë¨
- ë³µì‚¬ ì‹œ ê³µë°± í¬í•¨

**í•´ê²°:**
1. Superthread ëŒ€ì‹œë³´ë“œì—ì„œ ìƒˆ API í‚¤ ìƒì„±
2. ê³µë°± ì—†ì´ ì •í™•íˆ ì…ë ¥
3. í™˜ê²½ ë³€ìˆ˜ ë‹¤ì‹œ ì„¤ì •

### âŒ "Workspace IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"

**ì›ì¸:**
- Workspace ID í˜•ì‹ì´ ì˜ëª»ë¨
- ì›Œí¬ìŠ¤í˜ì´ìŠ¤ê°€ ì‚­ì œë¨

**í•´ê²°:**
1. ëŒ€ì‹œë³´ë“œì—ì„œ í˜„ì¬ Workspace ID í™•ì¸
2. "workspace_"ë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸
3. í•„ìš”í•˜ë©´ ìƒˆ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ìƒì„±

### âŒ "ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤"

**ì›ì¸:**
- API í‚¤ì˜ ê¶Œí•œ ë²”ìœ„ê°€ ì œí•œë¨
- ì‚¬ìš©ìê°€ í•´ë‹¹ ë¬¸ì„œì— ì ‘ê·¼ ê¶Œí•œ ì—†ìŒ

**í•´ê²°:**
1. API í‚¤ì˜ ê¶Œí•œ ë²”ìœ„ í™•ì¸
2. í•„ìš”í•œ ê¶Œí•œ ì¶”ê°€
3. ìƒˆ API í‚¤ ìƒì„±

### âœ… ì—°ê²° í…ŒìŠ¤íŠ¸

```bash
# API ì„œë²„ ì‹œì‘
cd api_server_v2
uvicorn app.main:app --reload

# ë‹¤ë¥¸ í„°ë¯¸ë„ì—ì„œ í…ŒìŠ¤íŠ¸
curl http://localhost:8000/superthread/health

# ì˜ˆìƒ ì‘ë‹µ
# {
#   "status": "healthy",
#   "type": "superthread",
#   "workspace_id": "workspace_xxxxx",
#   "timestamp": "2024-11-18T..."
# }
```

---

## ğŸ¯ Best Practices

### 1. **API í‚¤ ë³´ì•ˆ**
- âœ… í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬
- âœ… `.env` íŒŒì¼ì„ `.gitignore`ì— ì¶”ê°€
- âœ… API í‚¤ ì •ê¸°ì ìœ¼ë¡œ ë¡œí…Œì´ì…˜
- âŒ ì½”ë“œì— ì§ì ‘ ì…ë ¥í•˜ì§€ ì•Šê¸°
- âŒ ê³µê°œ ì €ì¥ì†Œì— ì»¤ë°‹í•˜ì§€ ì•Šê¸°

### 2. **ì„±ëŠ¥ ìµœì í™”**
- ë°°ì¹˜ ì‘ì—… ì‚¬ìš©: ëŒ€ëŸ‰ ë°ì´í„°ëŠ” `batch_save_memories` ì‚¬ìš©
- ê²€ìƒ‰ ì œí•œ: `limit` íŒŒë¼ë¯¸í„°ë¡œ ê²°ê³¼ ìˆ˜ ì œí•œ
- ìºì‹±: ìì£¼ ì¡°íšŒí•˜ëŠ” ë°ì´í„°ëŠ” ë¡œì»¬ ìºì‹œ í™œìš©

### 3. **ê¶Œí•œ ê´€ë¦¬**
- ìµœì†Œ ê¶Œí•œ ì›ì¹™: í•„ìš”í•œ ìµœì†Œ ê¶Œí•œë§Œ ë¶€ì—¬
- ì •ê¸° ê²€í† : íŒ€ êµ¬ì„± ë³€í™”ì— ë”°ë¼ ê¶Œí•œ ì—…ë°ì´íŠ¸
- ê°ì‚¬ ë¡œê·¸: ì£¼ìš” ì‘ì—…ì˜ ë¡œê·¸ ê¸°ë¡

### 4. **ë°ì´í„° ë°±ì—…**
- ì •ê¸° ë°±ì—…: ì¤‘ìš” ë°ì´í„°ëŠ” ì£¼ê¸°ì ìœ¼ë¡œ ë°±ì—…
- ë²„ì „ ê´€ë¦¬: `create_version`ìœ¼ë¡œ ì¤‘ìš” ì‹œì  ê¸°ë¡
- ì•„ì¹´ì´ë¹™: ì˜¤ë˜ëœ ë°ì´í„°ëŠ” ë³„ë„ ì €ì¥ì†Œë¡œ ì´ë™

---

## ğŸ“š ì¶”ê°€ ë¦¬ì†ŒìŠ¤

- [Superthread ê³µì‹ ë¬¸ì„œ](https://docs.superthread.com/)
- [Superthread API ë ˆí¼ëŸ°ìŠ¤](https://api.superthread.com/docs)
- [Memory Hub ë¬¸ì„œ](./README.md)
- [ì €ì¥ì†Œ ì–´ëŒ‘í„° êµ¬í˜„](./api_server_v2/app/adapters/superthread.py)

---

## ğŸ¤ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ë©´:

1. [GitHub Issues](https://github.com/MediumsKor/LLM_Deliver/issues)ì—ì„œ í™•ì¸
2. [Superthread ì§€ì›íŒ€](https://superthread.com/support)ì— ë¬¸ì˜
3. ìš°ë¦¬ ì»¤ë®¤ë‹ˆí‹° í¬ëŸ¼ì—ì„œ ì§ˆë¬¸

**í–‰ìš´ì„ ë¹•ë‹ˆë‹¤! ğŸš€**
